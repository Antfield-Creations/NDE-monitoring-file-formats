on: push

jobs:
  check:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      - name: install dependency manager and dependencies
        run: |
          pip install pipenv
          pipenv install

      - name: run checks
        run: make check

      - name: run tests
        run: make tests

      - name: integration-test the installable package
        run: |
          echo "installing from ${{ github.ref_name }}
          pip install git+https://github.com/Antfield-Creations/NDE-monitoring-file-formats@${{ github.ref_name }}#egg=bass_diffusion
          python3 -c "from bass_diffusion import BassDiffusionModel; model = BassDiffusionModel()" 
